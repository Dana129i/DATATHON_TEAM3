![프로젝트 배너](https://file.nexon.com/NxFile/download/FileDownloader.aspx?oidFile=5485424096059594172)

# 프로젝트 개요
메이플스토리는 2003년 4월 상용화를 시작으로 세계 최초의 횡스크롤 MMORPG를 표방한 이후 지금까지 꾸준한 인기를 누리고 있는 대표적인 국민 게임입니다. 장기 서비스 덕분에 오랜 기간 게임을 즐겨온 사용자들도 많습니다. 

게임 사용자가 오래 잔존할수록 서비스의 안정성과 매출이 확보되며, 반대로 이탈이 많아지면 운영에 큰 부담이 따릅니다. 따라서 사용자 이탈의 원인을 분석하고, 기존 상위 유저의 스탯과 장비 구성 등의 세팅을 파악하는 것은 이탈 방지 전략 수립은 물론, 향후 업데이트 방향 설정에도 중요한 기초 자료로 활용될 수 있습니다. 

본 프로젝트는 **뉴비 이탈 방지팀**과 **캐릭터 이탈 예측팀**으로 나뉘어 병행 수행되었으며, 본 저장소는 그중 **뉴비 이탈 방지팀**의 작업 결과를 중심으로 정리되어 있습니다.

<hr/>

## 📅 프로젝트 기간
> 2025.04.11 ~ 2025.05.13 (32일)

<hr/>
  
## 👨‍👩‍👧‍👦 팀 소개(전체)
👉 **뉴비 이탈 방지팀**: 캐릭터 육성을 위해 장비를 강화해야 하는 뉴비 유저들이 정보 부족으로 어려움을 겪음 → **장비 정보를 기반**으로 **전투력을 예측**하고 **비슷한 전투력인 고레벨 유저들의 장비세팅**을 보여주고자 함
  
| 이름  | 역할           |
|-----|--------------|
| 공통 | API 연동 및 데이터 수집, 데이터 전처리, 시각화 기반 EDA, 추론통계 분석 |
| 김수현 | 부팀장, 머신러닝 및 딥러닝 구축, PPT 작성, 발표(메인) |
| 박재홍 | Streamlit 기반 대시보드 구축(메인), PPT 작성  |
| 최지영 | 머신러닝 구축, Streamlit 기반 대시보드 구축(보조), 팀 공통 코드 취합 및 정리 |

👉 **캐릭터 이탈 예측팀**: 고레벨·고스펙 캐릭터의 생존 기간 및 이탈 분석 자료 부재 → **경험치 변화량**을 기반으로 **캐릭터가 이탈했는지 예측**하고자 함

| 이름  | 역할           |
|-----|--------------|
| 공통 | API 연동 및 데이터 수집, 데이터 전처리, 시각화 기반 EDA, 추론통계 분석 |
| 이호준 | 팀장, 머신러닝 구축, PPT 작성, 발표(보조) |
| 류진수 | 머신러닝 구축, Streamlit 기반 대시보드 구축(메인), PPT 작성 |
| 정열상 | 머신러닝 구축, PPT 작성, 프로젝트 사전설명 자료 작성  |

<hr/>

## 🧩 문제 정의

- **배경**  
  메이플스토리에서는 하이퍼 버닝 이벤트 등으로 뉴비 유저가 빠르게 Lv.260까지 도달할 수 있도록 성장 가이드를 제공하고 있습니다. <br>
  그러나 이후 단계에서의 명확한 장비 교체 기준이나 육성 방향성이 부족하며, 이는 유저의 이탈 가능성을 높이는 요인이 될 수 있습니다.

- **문제 상황**  
  - 어떤 장비를 언제, 어떻게 바꿔야 할지에 대한 정보가 부족함  
  - 전투력 상승 경로가 불분명할 경우, 성장이 정체되고 흥미 저하로 이어질 수 있음

- **정의한 문제**  
  육성 가이드를 마친 뉴비 유저의 효율적인 장비 교체를 위한 **추천 시스템**을 마련하고자 합니다.

<hr/>

## 🔍 프로젝트 분석 방향

- **목표**  
  고레벨 유저의 장비 데이터를 학습하여, 뉴비 유저에게 **전투력 기반 장비 추천 및 성장 가이드**를 제공하는 시스템을 구축합니다.

- **핵심 전략**  
  - 상위 랭커 유저의 장비 및 스탯 데이터를 수집  
  - 전투력과 장비 조합 간의 관계를 딥러닝 모델로 학습  
  - 유사한 전투력을 가진 고레벨 유저를 추천하여 실질적인 성장 방향을 제시

- **뉴비 유저 정의**  
  → Lv.260까지 성장한 이후 명확한 목표를 상실하고, 장비 구성에 어려움을 겪는 유저
  
<hr/>

## 🧾 데이터 수집
> [NEXON Open API](https://openapi.nexon.com/ko/game/maplestory/?id=14)

- **수집 방식**  
  - 메이플스토리 Open API 사용  
  - 46개 직업 × 상위 1,000명 → 약 46,000명의 고레벨 유저  
  - 장비, 능력치, 하이퍼스탯, 링크, 유니온 등 **전투력에 영향을 주는 요소 전반 수집**  
  - 전투력 수치 또한 API를 통해 직접 수집됨

- **데이터 구조**  
  - 한 캐릭터당 최대 24개의 장비 착용  
  - 총 데이터 약 100만 행 규모 → DeepSets 구조로 학습

- **전처리 작업**  
  1. 장비별 주요 속성 정리 (ex. 스타포스, 잠재옵션 등)  
  2. 직업별 주스탯 외 능력치, 기타 불필요한 컬럼 제거 및 통일  
  3. 잠재옵션 결측치 처리 → 'Not Granted' 또는 'None'으로 분류
  4. 범주형 변수는 Label Encoding, 수치형 변수는 StandardScaler 적용

<hr/>

## ✏️ 사용 기술

- **Python**
  - Pandas, NumPy: 데이터 처리 및 분석
  - Matplotlib, Seaborn: 데이터 시각화
  - Requests: API를 활용한 데이터 수집

- **Modeling** <br>
본 프로젝트에서는 최종 예측 모델로 **Deepsets 기반의 딥러닝 모델인 DeepMaskedModel**을 사용하였습니다. 해당 모델은 장비 정보를 Mask 기반으로 처리하는 DeepSets 구조를 활용하여, **유저의 전투력(로그 스케일 적용)을** 정밀하게 예측하는 것을 목표로 설계되었습니다. 불규칙한 장비 슬롯 구성에도 유연하게 대응하며, 다양한 장비 조합에 대해 유사한 패턴을 효과적으로 학습할 수 있다는 장점이 있습니다.

  이외에도 다양한 접근을 통해 성능 비교 및 유저 특성 분석을 시도하였습니다:

    - **K-Nearest Neighbors (KNN)**  
  유저의 장비 정보 및 전투력을 바탕으로, 거리 기반으로 유사한 유저 탐색

    - **Clustering (KMeans, DBSCAN 등)**  
  유저 스탯 및 장비 정보를 기반으로 한 군집화 및 그룹 분석

    - **회귀 모델링 (Regression Models)**  
  전투력 예측 성능 비교를 위한 다양한 트리 기반 앙상블 모델 실험
      - Random Forest Regressor  
      - Gradient Boosting Regressor  
      - XGBoost Regressor  
      - CatBoost Regressor

    ※ 위 실험은 모델 선정 및 데이터 패턴 탐색에 참고용으로 사용되었으며, 최종 모델에는 포함되지 않았습니다.

<hr/>

## 🚀 모델 설계 및 활용 방안

- **모델 설계**  
  - DeepSets 기반 딥러닝 모델 사용  
  - 장비 단위 임베딩 → 유저 단위 벡터로 집계 → 전투력 예측  
  - 코사인 유사도를 활용한 **유사 유저 추천 시스템** 구현

- **모델 성능**  
  - 평균 RMSE: `0.70`, R²: `0.7083`  
  - 안정적인 전투력 예측 성능 확보

- **활용 방안**
  1. 전투력 기반 장비 추천 제공  
     → 뉴비 유저는 추천 시스템을 통해 장비를 점진적으로 개선하고 전투력을 향상시킬 수 있습니다.

  2. 게임 내 성취감과 재미 유도  
     → 전투력이 높아질수록 보스 및 사냥 콘텐츠의 난이도가 낮아지고, 유저는 **게임 내 성취감과 재미**를 경험하게 됩니다.

  3. 성장 동기 강화 및 유저 이탈 방지  
     → 이러한 긍정적인 경험은 **성장 동기를 유도**하고, **유저 이탈을 방지**하는 데 기여할 수 있습니다.

  4. 과금 전환 가능성 및 전략적 기여  
     → 단순한 추천 시스템을 넘어, **과금 전환 가능성**을 높이고 **수익 창출 및 운영 기획 측면의 전략적 가치**도 기대할 수 있습니다.

  5. 핵심 장비 입력 기반의 추천 시스템 구현  
     → Streamlit 시뮬레이터에서는 입력 복잡도를 줄이기 위해 **주요 장비 3종**을 기본 입력값으로 설정하였습니다.  
     → 이 3종은 딥러닝 모델 기반 중요도 분석 결과, **전투력 예측 성능(RMSE)에 가장 큰 영향을 준 슬롯**으로 확인된 항목입니다. <br>
     → 입력된 장비 정보를 바탕으로 모델이 전투력을 예측하고, **유사한 고레벨 유저의 장비 세팅**을 보여줍니다.

